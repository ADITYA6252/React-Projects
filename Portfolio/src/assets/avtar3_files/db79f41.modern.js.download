(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{3489:function(t,e,o){var content=o(4670);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("99bec990",content,!0,{sourceMap:!1})},4669:function(t,e,o){"use strict";var n=o(3489),r=o.n(n);o.d(e,"default",(function(){return r.a}))},4670:function(t,e,o){var n=o(34),r=o(377),l=o(1510),d=n((function(i){return i[1]})),c=r(l);d.push([t.i,".modal_iaY5v .modal-dialog{width:100vw;height:100vh;max-width:initial;margin:0 auto;padding:3.125rem}@media (max-width: 1023.98px){.modal_iaY5v .modal-dialog{margin:0 auto}}.modal_iaY5v .modal-dialog .modal-content{width:100%;margin:0 auto;height:100%;border-radius:0;background:transparent}.modal_iaY5v .modal-dialog .modal-content .modal-body{width:100%;height:100%;padding:0}.modal_iaY5v .modal-dialog .modal-content .modal-body>div{width:100%;height:100%;text-align:center;display:flex;align-items:center;justify-content:center}.modal_iaY5v .modal-dialog .modal-content .modal-body img,.modal_iaY5v .modal-dialog .modal-content .modal-body video{max-width:100%;max-height:100%;margin:0 auto;background:#fff;pointer-events:none}.modal_iaY5v .close_GocI3{display:block;position:fixed;top:.9375rem;right:.9375rem;z-index:9999;border-radius:50%;background:#fff;font-size:1.5rem;color:#000;box-shadow:none !important}.lottie_71yYH{width:auto;height:100%;overflow:hidden;margin:0 auto;background:#fff}.watermark_XG40e:before{position:absolute;content:'';background-image:url("+c+");background-repeat:no-repeat;background-position:center;opacity:0.7;width:100%;height:100%;pointer-events:none;z-index:1042;top:0;left:0}.controlPosition_GDVpw{position:absolute;bottom:8px;left:50%;transform:translateX(-50%)}\n",""]),d.locals={modal:"modal_iaY5v",close:"close_GocI3",lottie:"lottie_71yYH",watermark:"watermark_XG40e",controlPosition:"controlPosition_GDVpw"},t.exports=d},6245:function(t,e,o){"use strict";o.r(e);var n=o(8),r=o(6),l=(o(26),o(41),o(27),o(1269)),d=o(6374),c=o(1318),m=o.n(c),h=o(140),v=o(72),f=o(1449),y=o(1430),label=o(1440),w=o(1574),P=o(3331);function _(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function k(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?_(Object(o),!0).forEach((function(e){Object(r.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):_(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var C={components:{BModal:d.a,UilTimes:l.a,Controls:P.a,CanvasRenderer:w.a},mixins:[f.a,label.a,y.a],props:{item:{type:Object,default:()=>{}},brandPreview:{type:String,default:null},currentPreviewUrl:{type:String,default:null},hasCustomControls:{type:Boolean,default:!1}},data:()=>({isPlaying:!0,animationData:null,player:null,isCopied:!1,isLoadingAction:null,canvasWidth:0,canvasHeight:0}),computed:{showWatermark(){return!this.canItemDownload(this.item)}},mounted(){this.canvasWidth=.8*window.innerWidth,this.canvasHeight=.8*window.innerHeight},methods:{generateSrcSetPx:v.c,generateMultipleFormats:v.a,onShown(){"lottie"===this.item.asset&&this.brandPreview&&(this.player=this.$refs.lottiePlayer,this.player.play(),this.hasCustomControls&&(this.animationData=this.player.getLottie()))},play(){this.player.play(),this.isPlaying=!0},pause(){this.player.pause(),this.isPlaying=!1},onClose(){this.$modal.close("modalItemPreviewFs")},preHandleAuth(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this.handleAuth({trackAuth:()=>this.track("auth")})){if(this.canDownload)return!0;if(this.$store.state.user.previousSubscription)this.track("modal-update-payment-details",t),this.$modal.open({id:"modalUpdatePaymentDetails",component:o.e(437).then(o.bind(null,3214)),options:{track:!0,modalOnModal:!0,extraTrackingData:{from_location:"pdp-fs-player-control-".concat(t,"-svg"),from_asset:this.item.asset}},props:{previousSubscription:this.$store.state.user.previousSubscription}});else{this.track("pricing",t),this.$analytics.track("pricing",{route_name:this.$route.name,route_path:this.$route.path,location:"preview-fs-modal",action:t,data:k({postAction:"pricing-page",feature:"pdp-preview",featureKey:"pdp-preview-fs-".concat(t,"-").concat(this.item.asset,"-svg")},Object(h.b)(this,{item:this.item,canBranded:!0}))});var e="".concat("https://iconscout.com").concat(this.$router.resolve(this.$helper.localize({name:"pricing"})).href);window.open(e,"_blank")}}return!1},onDownload(){var t=this;return Object(n.a)((function*(){if(t.preHandleAuth("download"))if(t.isLoadingAction="download",yield t.preDownload({format:"svg",canBeBranded:!0,downloadUrl:!0,nuxtLoader:!1,location:"pdp-fs-preview",action:"player-controls-download"}))try{t.player.snapshot()}catch(e){console.error(e),t.toastMessage("Failed to download file")}finally{t.isLoadingAction=null}else{t.isLoadingAction=null;var e="Failed to fetch URL";console.error(e),t.toastMessage(e)}}))()},onCopy(){var t=this;return Object(n.a)((function*(){if(t.preHandleAuth())if(t.isLoadingAction="copy",yield t.preDownload({format:"svg",canBeBranded:!0,downloadUrl:!0,nuxtLoader:!1,location:"pdp-fs-preview",action:"player-controls-copy"}))try{t.isCopied=!0;var e=(new DOMParser).parseFromString(t.player.snapshot(!1),"text/xml");e.getElementsByTagName("svg")[0].setAttribute("id",t.item.name),m()((new XMLSerializer).serializeToString(e)),setTimeout((()=>{t.isCopied=!1}),5e3)}catch(o){console.error(o),t.toastMessage("Failed to copy file")}finally{t.isLoadingAction=null}else{t.isLoadingAction=null;var o="Failed to fetch URL";console.error(o),t.toastMessage(o)}}))()},track(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copy";this.$analytics.track("pdp-preview",{route_path:this.$route.path,route_name:this.$route.name,location:"pdp-fs-player-controls",action:e,data:k({postAction:t},Object(h.b)(this,{item:this.item,canBranded:!0}))})},toastMessage(title){this.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}}},O=C,x=o(4669),$=o(5);var component=Object($.a)(O,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"modalItemPreviewFs","modal-class":t.$style.modal,visible:"",centered:"","no-fade":"","hide-header":"","hide-footer":""},on:{shown:t.onShown,hidden:t.onClose}},[e("a",{class:["btn btn-md btn-icon",t.$style.close],attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClose.apply(null,arguments)}}},[e("uil-times")],1),t._v(" "),"lottie"===t.item.asset?[t.brandPreview?e("div",{staticClass:"flex-column"},[e("lottie-player",{ref:"lottiePlayer",class:[t.$style.lottie,t.hasCustomControls?"pb-8":null,t.showWatermark?t.$style.watermark:null],attrs:{src:t.brandPreview,loop:""}}),t._v(" "),t.hasCustomControls&&t.animationData?e("controls",{class:t.$style.controlPosition,attrs:{"is-playing":t.isPlaying,animation:t.animationData,"is-loading":t.isLoadingAction,"is-copied":t.isCopied,item:t.item,client:"pdp-fs"},on:{copySvg:t.onCopy,downloadSvg:t.onDownload,play:t.play,pause:t.pause}}):t._e()],1):e("div",{on:{click:t.onClose}},[e("video",{attrs:{src:t.currentPreviewUrl,autoplay:"",muted:"",loop:"",playsinline:"",type:"video/mp4"},domProps:{muted:!0}})])]:[t.brandPreview&&t.isLoggedIn?e("div",{class:t.showWatermark?t.$style.watermark:null,on:{click:t.onClose}},[e("canvas-renderer",{staticClass:"bg-white",attrs:{"canvas-width":t.canvasWidth,"canvas-height":t.canvasHeight,preview:t.brandPreview,"item-id":t.item.id,"canvas-ref":"pdpCanvasRef"}})],1):e("div",{on:{click:t.onClose}},[e("picture",[e("source",t._b({},"source",t.generateMultipleFormats({url:t.currentPreviewUrl,h:700}),!1)),t._v(" "),e("img",t._b({attrs:{alt:t.name}},"img",t.generateSrcSetPx({url:t.currentPreviewUrl,h:700,format:"webp"}),!1))])])]],2)}),[],!1,(function(t){this.$style=x.default.locals||x.default}),null,null);e.default=component.exports}}]);
